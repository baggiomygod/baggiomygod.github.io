---
layout:     post
title:      react异常处理记录(持续更新)
subtitle:   react error
date:       2019-02-25
author:     wengfan
header-img: img/post-bg-keybord.jpg
catalog: true
tags:
    - react
---

# 1.react异常处理记录(持续更新)

### Can't call setState (2019-02-25)
```
[](Warning: Can't call setState (or forceUpdate) on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method. 
```

####  原因
> 不能在已经被销毁的组件中调用setState()方案 
出现场景：跳转路由 当前组件被销毁 组件内部还存在异步操作对state的状态信息 比如http请求,定时器setTimeOut更新stat
#### 解决
解决方案一：组件被销毁之前重写setState方法 不对状态做任何改变
```
    componentWillUnmount = () => {
        this.setState = () => {
            return
        }
    }
```