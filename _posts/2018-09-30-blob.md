---
layout:     post
title:      åç«¯è¿”å›äºŒè¿›åˆ¶æµå›¾ç‰‡æ—¶ï¼Œå‰ç«¯åº”å¦‚ä½•å¤„ç†
subtitle:   img blob axios
date:       2018-11-11
author:     wengfan
header-img: img/post-bg-keybord.jpg
catalog: true
tags:
    - blob
    - bug
    - ç¬”è®°
---
# åç«¯è¿”å›äºŒè¿›åˆ¶æµå›¾ç‰‡æ—¶ï¼Œå‰ç«¯åº”å¦‚ä½•å¤„ç†
ä»Šå¤©é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œåç«¯æ¥å£è¿”å›çš„æ•°æ®æ‰“å°å‡ºæ¥æ˜¯ä¸€å †ä¹±ç 

GIF89aï¿½ï¿½ï¿½ï¿½ï¿½ï¿½,ï¿½ï¿½@ï¿½Hï¿½ï¿½ï¿½ï¿½*\È°ï¿½Ã‡#Jï¿½Hï¿½ï¿½Å‹3jï¿½È±ï¿½Ç Cï¿½Iï¿½ï¿½É“(Sï¿½\É²ï¿½Ë—0cÊœIï¿½ï¿½Í›8sï¿½ï¿½É³ï¿½ÏŸ@ï¿½
Jï¿½ï¿½Ñ£Hï¿½*]Ê´ï¿½Ó§Pï¿½Jï¿½Jï¿½ï¿½Õ«Xï¿½jï¿½Êµï¿½×¯ï¿½Kï¿½ï¿½Ù³hÓª]Ë¶ï¿½[ï¿½"ßŠï¿½(ï¿½.ï¿½vï¿½ï¿½ï¿½ï¿½ï¿½.Ø—}ï¿½7ï¿½\ï¿½ï¿½ï¿½"NÌ¸1ï¿½.ï¿½Vï¿½Ò±^ï¿½o'ï¿½Ì’ï¿½Tï¿½-ï¿½ï¿½ï¿½*hï¿½(OCUï¿½Qï¿½ï¿½Ê›?ï¿½Fï¿½zvC×¬ï¿½Nï¿½zqcï¿½lï¿½ï¿½V+ï¿½8í”»ï¿½1ï¿½ï¿½ï¿½ï¿½EO;}ï¿½ï¿½ï¿½Ìï¿½tnï¿½zï¿½ï¿½gIï¿½ï¿½^$ï¿½ï¿½Şƒï¿½ï¿½ï¿½ï¿½yï¿½ï¿½×‚7+^ï¿½ï¿½ï¿½ï¿½ï¿½oï¿½ï¿½ï¿½ï¿½ï¿½É·dï¿½w]Lï¿½ï¿½ï¿½ï¿½ï¿½7ï¿½ï¿½ï¿½ï¿½`ï¿½:ï¿½`ï¿½ï¿½Yï¿½_Xï¿½Faï¿½ï¿½uaGUï¿½Pï¿½'Õ‰#>ï¿½aT,ï¿½"
......
ï¿½ï¿½dï¿½ï¿½ï¿½ã±¾ï¿½ï¿½-ï¿½ï¿½á¾¾ï¿½ï¿½ï¿½ï¿½Mï¿½nï¿½ï¿½ï¿½ï¿½zEï¿½ï¿½Gï¿½ï¿½f]ï¿½ï¿½-ï¿½ì¼¼ï¿½ï¿½ï¿½.ï¿½ï¿½Ö´Nï¿½z}ï¿½nï¿½Vï¿½ï¿½ÜŒï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Nï¿½Tï¿½ï¿½#Nï¿½mï¿½ï¿½ï¿½>ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×¬=ï¿½ï¿½~ï¿½ï¿½ï¿½^ï¿½Ó­ï¿½Úï¿½×ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Aï¿½ï¿½{:ï¿½
ï¿½ï¿½&ï¿½(ï¿½ï¿½*ï¿½ï¿½,ï¿½ï¿½.ï¿½ï¿½0ï¿½24?ï¿½4_ï¿½6ï¿½8ï¿½ï¿½:ï¿½ï¿½<ï¿½ï¿½>ï¿½ï¿½@ï¿½B?ï¿½D_ï¿½Fï¿½Hï¿½ï¿½Jï¿½ï¿½Lï¿½ï¿½Nï¿½ï¿½Pï¿½Rï¿½ï¿½;{
  "code" : 200
}

åˆšå¼€å§‹createObjectURL è½¬æ¢åè¿˜æ˜¯æ— æ³•æ˜¾ç¤º
```
        const myBlob = new window.Blob([data], {type: 'image/gif'})
        const qrUrl = window.URL.createObjectURL(myBlob)
        var img = document.createElement('img')
        img.src = qrUrl
        img.onload = function () {
          window.URL.revokeObjectURL(qrUrl)
        }
        const imgDiv = document.querySelector('.qr-div')
        imgDiv.appendChild(img)
```

æ ¹æ®ç½‘ä¸Šç™¾åº¦çš„æ–¹æ³•éƒ½ä¸è¡Œ
è½¬base64
'data:image/gif;base64,' + Base64.encode(res.data.toString()ï¼‰

ç»è¿‡åŠå¤©çš„æŠ˜è…¾ç»ˆäºè§£å†³


å·²è§£å†³ï¼š
é¦–å…ˆéœ€è¦è®¾ç½®axios responseType: 'blob'
```
    axios.get(url, {
      params: params,
      headers: {
        authorization: context.$cookie.get('authorization')
      },
      responseType: 'blob'
    }, 
    // ...
    )
```
ç„¶åç›´æ¥createObjectURLå³å¯
```
        const qrUrl = window.URL.createObjectURL(res.data)
        var img = document.createElement('img')
        img.src = qrUrl
        img.onload = function () {
          window.URL.revokeObjectURL(qrUrl)
        }
        const imgDiv = document.querySelector('.qr-div')
        imgDiv.appendChild(img)
```
